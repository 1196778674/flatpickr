"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Flatpickr=function(){function e(t,n){_classCallCheck(this,e),this.element=t,this.instanceConfig=n||{},this.setupFormats(),this.setupLocale(),this.parseConfig(),this.setupInputs(),this.setupDates(),this.setupHelperFunctions(),this.build(),this.bind()}return _createClass(e,[{key:"bind",value:function(){var e=this;document.addEventListener("keydown",function(t){return e.onKeyDown(t)}),window.addEventListener("resize",function(t){return e.onResize(t)}),this.config.clickOpens&&((this.altInput||this.input).addEventListener("click",function(t){return e.open(t)}),(this.altInput||this.input).addEventListener("focus",function(t){return e.open(t)})),this.config.wrap&&(this.element.querySelector("[data-open]")&&this.element.querySelector("[data-open]").addEventListener("click",function(t){return e.open(t)}),this.element.querySelector("[data-close]")&&this.element.querySelector("[data-close]").addEventListener("click",function(t){return e.close(t)}),this.element.querySelector("[data-toggle]")&&this.element.querySelector("[data-toggle]").addEventListener("click",function(t){return e.toggle(t)}),this.element.querySelector("[data-clear]")&&this.element.querySelector("[data-clear]").addEventListener("click",function(t){return e.clear(t)})),this.config.noCalendar||(this.prevMonthNav.addEventListener("click",function(){return e.changeMonth(-1)}),this.nextMonthNav.addEventListener("click",function(){return e.changeMonth(1)}),this.currentYearElement.addEventListener("wheel",function(){return e.yearScroll}),this.currentYearElement.addEventListener("focus",function(){return e.currentYearElement.select}),this.currentYearElement.addEventListener("input",function(t){e.currentYear=parseInt(t.target.value,10),e.redraw()}),this.days.addEventListener("click",function(t){return e.selectDate(t)})),document.addEventListener("click",function(t){return e.documentClick(t)}),document.addEventListener("blur",function(t){return e.documentClick(t)},!0),this.config.enableTime&&(this.hourElement.addEventListener("wheel",this.timeWrapper),this.minuteElement.addEventListener("wheel",this.timeWrapper),this.hourElement.addEventListener("input",this.timeWrapper),this.minuteElement.addEventListener("input",this.timeWrapper),this.hourElement.addEventListener("mouseout",this.updateValue),this.minuteElement.addEventListener("mouseout",this.updateValue),this.hourElement.addEventListener("change",this.updateValue),this.minuteElement.addEventListener("change",this.updateValue),this.hourElement.addEventListener("focus",this.hourElement.select),this.minuteElement.addEventListener("focus",this.minuteElement.select),this.config.enableSeconds&&(this.secondElement.addEventListener("wheel",this.timeWrapper),this.secondElement.addEventListener("input",this.timeWrapper),this.secondElement.addEventListener("mouseout",this.updateValue),this.secondElement.addEventListener("change",this.updateValue),this.secondElement.addEventListener("focus",this.secondElement.select)),this.config.time_24hr||(this.amPM.addEventListener("click",this.amPMToggle),this.amPM.addEventListener("wheel",this.amPMToggle),this.amPM.addEventListener("mouseout",this.updateValue),this.amPM.addEventListener("keydown",function(t){38!==t.which&&40!==t.which||e.amPMToggle(t)})))}},{key:"bringIntoView",value:function(e){e=this.parseDate(e||this.selectedDateObj||this.config.defaultDate||this.config.minDate||new Date),this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.redraw()}},{key:"build",value:function(){var t=document.createDocumentFragment();this.calendarContainer=e.createElement("div","flatpickr-calendar"),t.appendChild(this.buildMonthNav()),t.appendChild(this.buildWeekdays()),t.appendChild(this.buildDays()),this.config.enableTime&&t.appendChild(this.buildTime()),this.config.weekNumbers&&t.appendChild(this.buildWeeks()),this.calendarContainer.appendChild(t),document.body.appendChild(this.calendarContainer)}},{key:"buildDays",value:function(){this.days||(this.days=e.createElement("div","flatpickr-days"),this.days.tabIndex=-1);var t=(new Date(this.currentYear,this.currentMonth,1).getDay()-this.l10n.firstDayOfWeek+7)%7,n=this.utils.getDaysinMonth(),i=this.utils.getDaysinMonth((this.currentMonth-1+12)%12),a=document.createDocumentFragment(),s=i+1-t,r=void 0,o=void 0;for(this.config.weekNumbers&&(this.weekNumbers.innerHTML=""),this.days.innerHTML="";s<=i;s++){var l=new Date(this.currentYear,this.currentMonth-1,s,0,0,0,0,0),h=this.isEnabled(l),u=e.createElement("span",h?"flatpickr-day prevMonthDay":"disabled",s);h&&(u.tabIndex=0),a.appendChild(u)}for(s=1;s<=n;s++){r=new Date(this.currentYear,this.currentMonth,s,0,0,0,0,0),this.config.weekNumbers&&s%7===1&&this.weekNumbers.appendChild(e.createElement("span","disabled flatpickr-day",r.fp_getWeek())),o=!this.isEnabled(r);var c=e.createElement("span",o?"disabled":"flatpickr-day",s);o||(c.tabIndex=0,e.equalDates(r,new Date)&&c.classList.add("today"),this.selectedDateObj&&e.equalDates(r,this.selectedDateObj)&&c.classList.add("selected")),a.appendChild(c)}for(var d=n+1;d<=42-t;d++){var p=new Date(this.currentYear,this.currentMonth+1,d%n,0,0,0,0,0),m=!this.isEnabled(p),f=e.createElement("span",m?"nextMonthDay flatpickr-day":"disabled",d%n);this.config.weekNumbers&&d%7===1&&this.weekNumbers.appendChild(e.createElement("span","disabled",p.fp_getWeek())),m&&(f.tabIndex=0),a.appendChild(f)}return this.days.appendChild(a),this.days}},{key:"buildMonthNav",value:function(){var t=document.createDocumentFragment();return this.monthNav=e.createElement("div","flatpickr-month"),this.prevMonthNav=e.createElement("span","flatpickr-prev-month"),this.prevMonthNav.innerHTML=this.config.prevArrow,this.currentMonthElement=e.createElement("span","cur_month"),this.currentYearElement=e.createElement("input","cur_year"),this.currentYearElement.type="number",this.currentYearElement.title=this.l10n.scrollTitle,this.nextMonthNav=e.createElement("span","flatpickr-next-month"),this.nextMonthNav.innerHTML=this.config.nextArrow,this.navigationCurrentMonth=e.createElement("span","flatpickr-current-month"),this.navigationCurrentMonth.appendChild(this.currentMonthElement),this.navigationCurrentMonth.appendChild(this.currentYearElement),t.appendChild(this.prevMonthNav),t.appendChild(this.navigationCurrentMonth),t.appendChild(this.nextMonthNav),this.monthNav.appendChild(t),this.updateNavigationCurrentMonth(),this.monthNav}},{key:"buildTime",value:function(){this.timeContainer=e.createElement("div","flatpickr-time"),this.timeContainer.tabIndex=-1;var t=e.createElement("span","flatpickr-time-separator",":");return this.hourElement=e.createElement("input","flatpickr-hour"),this.minuteElement=e.createElement("input","flatpickr-minute"),this.hourElement.tabIndex=this.minuteElement.tabIndex=0,this.hourElement.type=this.minuteElement.type="number",this.hourElement.value=this.selectedDateObj?e.pad(this.selectedDateObj.getHours()):12,this.minuteElement.value=this.selectedDateObj?e.pad(this.selectedDateObj.getMinutes()):"00",this.hourElement.step=this.config.hourIncrement,this.minuteElement.step=this.config.minuteIncrement,this.hourElement.min=-this.config.time_24hr,this.hourElement.max=this.config.time_24hr?24:13,this.minuteElement.min=-this.minuteElement.step,this.minuteElement.max=60,this.hourElement.title=this.minuteElement.title=this.l10n.scrollTitle,this.timeContainer.appendChild(this.hourElement),this.timeContainer.appendChild(t),this.timeContainer.appendChild(this.minuteElement),this.config.enableSeconds&&(this.timeContainer.classList.add("has-seconds"),this.secondElement=e.createElement("input","flatpickr-second"),this.secondElement.type="number",this.secondElement.value=this.selectedDateObj?e.pad(this.selectedDateObj.getSeconds()):"00",this.secondElement.step=this.minuteElement.step,this.secondElement.min=this.minuteElement.min,this.secondElement.max=this.minuteElement.max,this.timeContainer.appendChild(e.createElement("span","flatpickr-time-separator",":")),this.timeContainer.appendChild(this.secondElement)),this.config.time_24hr||(this.amPM=e.createElement("span","flatpickr-am-pm",["AM","PM"][this.hourElement.value>11|0]),this.amPM.title=this.l10n.toggleTitle,this.amPM.tabIndex=0,this.timeContainer.appendChild(this.amPM)),this.timeContainer}},{key:"buildWeekdays",value:function(){this.weekdayContainer=e.createElement("div","flatpickr-weekdays");var t=this.l10n.firstDayOfWeek,n=void 0;return n=t>0&&t<n.length?[].concat(n.splice(t,n.length),n.splice(0,t)):this.l10n.weekdays.shorthand.slice(),this.config.weekNumbers&&(this.weekdayContainer.innerHTML="<span>"+this.l10n.weekAbbreviation+"</span>"),this.weekdayContainer.innerHTML+="<span>"+n.join("</span><span>")+"</span>",this.weekdayContainer}},{key:"buildWeeks",value:function(){return this.calendarContainer.classList.add("hasWeeks"),this.weekNumbers=e.createElement("div","flatpickr-weeks"),this.weekNumbers}},{key:"changeMonth",value:function(e){this.currentMonth+=e,this.handleYearChange(),this.updateNavigationCurrentMonth(),this.buildDays(),(this.config.noCalendar?this.timeContainer:this.days).focus()}},{key:"close",value:function(){this.isOpen=!1,this.calendarContainer.classList.remove("open"),(this.altInput||this.input).classList.remove("active"),this.config.onClose&&this.config.onClose(this.selectedDateObj,this.input.value)}},{key:"documentClick",value:function(e){var t=this.calendarContainer.contains(e.target),n=this.element.contains(e.target)||e.target===this.altInput;!this.isOpen||t||n||this.close()}},{key:"formatDate",value:function(e){var t=this;return e.split("").map(function(e){return t.formats[e]?t.formats[e]():"\\"!==e?e:""}).join("")}},{key:"handleYearChange",value:function(){(this.currentMonth<0||this.currentMonth>11)&&(this.currentYear+=this.currentMonth%11,this.currentMonth=(this.currentMonth+12)%12)}},{key:"isEnabled",value:function(e){if(this.config.minDate&&e<this.config.minDate||this.config.maxDate&&e>this.config.maxDate)return!1;e=this.parseDate(e,!0);for(var t=this.config.enable.length>0,n=t?this.config.enable:this.config.disable,i=void 0,a=0;a<n.length;a++){if(i=n[a],i instanceof Function&&i(e))return t;if("string"==typeof i&&/^wkd/.test(i)&&e.getDay()===(parseInt(i.slice(-1),10)+this.l10n.firstDayOfWeek-1)%7)return t;if((i instanceof Date||"string"==typeof i&&!/^wkd/.test(i))&&this.parseDate(i,!0).getTime()===e.getTime())return t;if("object"===("undefined"==typeof i?"undefined":_typeof(i))&&i.hasOwnProperty("from")&&e>=this.parseDate(i.from)&&e<=this.parseDate(i.to))return t}return!t}},{key:"open",value:function(){this.isOpen||(this.altInput||this.input).disabled||this.config.inline||(this.config["static"]||this.positionCalendar(),this.isOpen=!0,this.calendarContainer.classList.add("open"),this.config.allowInput||((this.altInput||this.input).blur(),(this.config.noCalendar?this.timeContainer:this.days).focus()),(this.altInput||this.input).classList.add("active"),this.config.onOpen&&this.config.onOpen(this.selectedDateObj,this.input.value))}},{key:"pad",value:function(e){return("0"+e).slice(-2)}},{key:"parseConfig",value:function(){this.config=Object.assign({},e.defaultConfig,this.element.dataset,this.instanceConfig)}},{key:"parseDate",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if("today"===e)e=new Date,t=!0;else if("string"==typeof e)if(e=e.trim(),this.config.parseDate)e=this.config.parseDate(e);else if(/^\d\d\d\d\-\d{1,2}\-\d\d$/.test(e))e=new Date(e.replace(/(\d)-(\d)/g,"$1/$2"));else if(Date.parse(e))e=new Date(e);else if(/^\d\d\d\d\-\d\d\-\d\d/.test(e))e=new Date(e.replace(/(\d)-(\d)/g,"$1/$2"));else if(/^(\d?\d):(\d\d)/.test(e)){var n=e.match(/^(\d?\d):(\d\d)(:(\d\d))?/),i=void 0!==n[4]?n[4]:0;e=new Date,e.setHours(n[1],n[2],i,0)}else console.error("flatpickr: invalid date string "+e),console.info(this.element);return e instanceof Date&&e.getTime()?(this.config.utc&&!e.fp_isUTC&&(e=e.fp_toUTC()),t&&e.setHours(0,0,0,0),e):null}},{key:"setupDates",value:function(){(this.config.defaultDate||this.input.value)&&(this.selectedDateObj=this.parseDate(this.config.defaultDate||this.input.value)),this.config.minDate&&(this.config.minDate=this.parseDate(this.config.minDate,!0)),this.config.maxDate&&(this.config.maxDate=this.parseDate(this.config.maxDate,!0));var e=this.selectedDateObj||this.config.defaultDate||this.config.minDate||new Date;this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()}},{key:"positionCalendar",value:function(){var e=this.calendarContainer.offsetHeight,t=this.altInput||this.input,n=t.getBoundingClientRect(),i=window.innerHeight-n.bottom+t.offsetHeight,a=void 0,s=window.pageXOffset+n.left;i<e?(a=window.pageYOffset-e+n.top-2,this.calendarContainer.classList.remove("arrowTop"),this.calendarContainer.classList.add("arrowBottom")):(a=window.pageYOffset+t.offsetHeight+n.top+2,this.calendarContainer.classList.remove("arrowBottom"),this.calendarContainer.classList.add("arrowTop")),this.calendarContainer.style.top=a+"px",this.calendarContainer.style.left=s+"px"}},{key:"redraw",value:function(){this.config.noCalendar||(this.updateNavigationCurrentMonth(),this.buildDays())}},{key:"selectDate",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.config.allowInput&&e.target===(this.altInput||this.input)&&13===e.which)this.setDate((this.altInput||this.input).value),this.redraw();else if(e.target.classList.contains("flatpickr-day")){var t=e.target.classList.contains("prevMonthDay"),n=e.target.classList.contains("nextMonthDay"),i=this.currentMonth-t+n;(t||n)&&this.changeMonth(+n-t),this.selectedDateObj=new Date(this.currentYear,i,e.target.innerHTML),this.updateValue(e),this.buildDays()}}},{key:"setupLocale",value:function(){this.l10n=Object.assign({},e.l10n)}},{key:"setupFormats",value:function(){var t=this;this.formats={D:function(){return t.l10n.weekdays.shorthand[t.formats.w()]},F:function(){return t.utils.monthToStr(t.formats.n()-1,!1)},H:function(){return e.pad(t.selectedDateObj.getHours())},J:function(){return t.formats.j()+t.l10n.ordinal(t.formats.j())},K:function(){return t.selectedDateObj.getHours()>11?"PM":"AM"},M:function(){return t.utils.monthToStr(t.formats.n()-1,!0)},S:function(){return e.pad(t.selectedDateObj.getSeconds())},U:function(){return t.selectedDateObj.getTime()/1e3},Y:function(){return t.selectedDateObj.getFullYear()},d:function(){return e.pad(t.formats.j())},h:function(){return t.selectedDateObj.getHours()%12?t.selectedDateObj.getHours()%12:12},i:function(){return e.pad(t.selectedDateObj.getMinutes())},j:function(){return t.selectedDateObj.getDate()},l:function(){return t.l10n.weekdays.longhand[t.formats.w()]},m:function(){return e.pad(t.formats.n())},n:function(){return t.selectedDateObj.getMonth()+1},s:function(){return t.selectedDateObj.getSeconds()},w:function(){return t.selectedDateObj.getDay()},y:function(){return String(t.formats.Y()).substring(2)}}}},{key:"setupHelperFunctions",value:function(){var e=this;this.utils={getDaysinMonth:function(){var t=arguments.length<=0||void 0===arguments[0]?e.currentMonth:arguments[0],n=arguments.length<=1||void 0===arguments[1]?e.currentYear:arguments[1];return 1===t&&n%4===0&&n%100!==0||n%400===0?29:e.l10n.daysInMonth[t]},monthToStr:function(t){var n=arguments.length<=1||void 0===arguments[1]?e.config.shorthandCurrentMonth:arguments[1];return e.l10n.months[(n?"short":"long")+"hand"][t]}}}},{key:"setupInputs",value:function(){this.input=this.config.wrap?this.element.querySelector("[data-input]"):this.element,this.config.altInput&&(this.altInput=this.input.cloneNode(!1),this.input.type="hidden",this.input.parentNode.insertBefore(this.altInput,this.input.nextSibling))}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"triggerChange",value:function(){this.config.onChange&&this.config.onChange(this.selectedDateObj,this.input.value)}},{key:"updateNavigationCurrentMonth",value:function(){this.currentMonthElement.textContent=this.utils.monthToStr(this.currentMonth)+" ",this.currentYearElement.value=this.currentYear}},{key:"updateValue",value:function(t){if(this.config.noCalendar&&!this.selectedDateObj)this.selectedDateObj=new Date;else if(!this.selectedDateObj)return;t&&t.target.blur();var n=void 0;if(this.config.enableTime){var i=this.selectedDateObj.getTime(),a=parseInt(this.hourElement.value,10)||0,s=void 0,r=(60+(parseInt(this.minuteElement.value,10)||0))%60;this.config.enableSeconds&&(s=(60+parseInt(this.secondElement.value,10)||0)%60),this.config.time_24hr||(a=a%12+12*("PM"===this.amPM.innerHTML)),this.selectedDateObj.setHours(a,r,void 0===s?this.selectedDateObj.getSeconds():s),this.hourElement.value=e.pad(this.config.time_24hr?a:(12+a)%12+12*(a%12===0)),this.minuteElement.value=e.pad(r),void 0!==s&&(this.secondElement.value=e.pad(s)),n=this.selectedDateObj.getTime()!==i}this.input.value=this.formatDate(this.config.dateFormat),this.altInput&&(this.altInput.value=this.formatDate(this.config.altFormat)),t&&(n||t.target.classList.contains("flatpickr-day"))&&this.triggerChange(),this.config.onValueUpdate&&this.config.onValueUpdate(this.selectedDateObj,this.input.value)}}],[{key:"createElement",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=document.createElement(e);return i.className=t,i.textContent=n,i}},{key:"equalDates",value:function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}},{key:"pad",value:function(e){return("0"+e).slice(-2)}}]),e}();Flatpickr.defaultConfig={utc:!1,wrap:!1,weekNumbers:!1,allowInput:!1,clickOpens:!0,time_24hr:!1,enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",altInput:!1,altInputClass:"",altFormat:"F j, Y",defaultDate:null,minDate:null,maxDate:null,parseDate:null,enable:[],disable:[],shorthandCurrentMonth:!1,inline:!1,"static":!1,prevArrow:"&lt;",nextArrow:"&gt;",enableSeconds:!1,hourIncrement:1,minuteIncrement:5,onChange:null,onOpen:null,onClose:null,onValueUpdate:null},Flatpickr.l10n={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle"},HTMLCollection.prototype.map=Array.prototype.map,HTMLCollection.prototype.flatpickr=function(e){return this.map(function(t){return new Flatpickr(t,e)})},HTMLElement.prototype.flatpickr=function(e){return new Flatpickr(this,e)},Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+parseInt(e,10))},Date.prototype.fp_isUTC=!1,Date.prototype.fp_toUTC=function(){var e=new Date(this.getTime()+6e4*this.getTimezoneOffset());return e.fp_isUTC=!0,e},Date.prototype.fp_getWeek=function(){var e=new Date(this.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)};